var tusimple=angular.module("tusimpleTree",[]);tusimple.directive("addNodeCheckbox",function(){return{link:function(e,n,o){n.bind("click",function(){console.log("llllll"),e.$apply(function(){e.node.nodes.push({id:parseInt(e.node.id+"1"),title:e.node.title+"."+(e.node.nodes.length+1),nodes:[]})})})}}}),tusimple.directive("cascadeCheckbox",function(){return{link:function(e,n,o){n.bind("change",function(){e.$broadcast("event_cascadeCheckbox_selectAll",n.prop("checked")),e.$parent.$emit("event_cascadeCheckbox_popAll")}),e.$on("event_cascadeCheckbox_selectAll",function(n,o){e.$apply(function(){e.node.checked=o})}),e.$on("event_cascadeCheckbox_popAll",function(n){for(var o=e.node.nodes.length,d=0,t=0,c=0;o>c;c++)e.node.nodes[c].checked?d++:t++;d==o?e.$apply(function(){e.node.checked=!0}):e.$apply(function(){e.node.checked=!1})})}}}),tusimple.directive("leafCheckbox",function(){function e(e){var n=e.nodes;return n&&n.length?!1:!0}return function(n,o,d){n.$watch("node",function(){e(n.node)?o.css("display","inline-block"):o.css("display","none")},!0)}}),tusimple.directive("removeNodeCheckbox",function(){return{link:function(e,n,o){var d=e.$parent.$parent;d.node?d.$on("removeNode",function(e,n){for(var o=0;o<d.node.nodes.length;o++)d.node.nodes[o].id===n&&(console.log("if"),d.$apply(function(){d.node.nodes.splice(o,1)}),e.stopPropagation())}):d.$on("removeNode",function(e,n){for(var o=0;o<d.data.length;o++)d.data[o].id===n&&(d.$apply(function(){d.data.splice(o,1)}),e.stopPropagation())}),n.bind("click",function(){e.$emit("removeNode",e.node.id)})}}}),angular.module("tusimpleTree").run(["$templateCache",function(e){e.put("template-html/add-nodes.html",'<div class="box-container">\n    <input leaf-checkbox type="checkbox" data-ng-model="node.checked"> {{node.title}}\n    <span add-node-checkbox class="add">+</span>\n</div>\n<ul ng-model="node.nodes">\n    <li ng-repeat="node in node.nodes" ng-include="\'template-html/add-nodes.html\'">\n    </li>\n</ul>'),e.put("template-html/nodes-renderer.html",'<div class="box-container">\n    <input cascade-checkbox type="checkbox" data-ng-model="node.checked"> {{node.title}}\n</div>\n<ul ng-model="node.nodes">\n    <li ng-repeat="node in node.nodes" ng-include="\'template-html/nodes-renderer.html\'">\n    </li>\n</ul>'),e.put("template-html/nodes-renderer1.html",'<div class="box-container">\n    <input leaf-checkbox type="checkbox" data-ng-model="node.checked"> {{node.title}}\n    <span remove-node-checkbox class="close">×</span>\n</div>\n<ul ng-model="node.nodes">\n    <li ng-repeat="node in node.nodes" ng-include="\'template-html/nodes-renderer1.html\'">\n    </li>\n</ul>'),e.put("template-html/nodes-renderer2.html",'<div class="box-container">\n    <input cascade-checkbox type="checkbox" data-ng-model="node.checked"> {{node.title}} \n    <span remove-node-checkbox class="close">×</span>\n</div>\n<ul ng-model="node.nodes">\n    <li ng-repeat="node in node.nodes" ng-include="\'template-html/nodes-renderer2.html\'">\n    </li>\n</ul>\n')}]);